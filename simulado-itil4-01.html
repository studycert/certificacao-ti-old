<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulado ITIL 4 Foundation - PMG Academy</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            max-width: 900px;
            width: 100%;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: #2c3e50;
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 1.8em;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .header .subtitle {
            font-size: 1em;
            opacity: 0.9;
        }

        .academy-badge {
            position: absolute;
            top: 15px;
            right: 20px;
            background: #e74c3c;
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: 600;
        }

        /* Tela de In√≠cio */
        .start-screen {
            padding: 50px 30px;
            text-align: center;
        }

        .start-screen h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8em;
            font-weight: 500;
        }

        .start-screen p {
            color: #7f8c8d;
            margin-bottom: 25px;
            font-size: 1em;
            line-height: 1.6;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .warning {
            background-color: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 20px;
            margin: 25px auto;
            text-align: left;
            border-radius: 0 8px 8px 0;
            max-width: 700px;
        }

        .start-btn {
            display: inline-block;
            background: linear-gradient(to right, #1a2a6c, #2c3e50);
            color: white;
            border: none;
            padding: 16px 40px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        }

        .back-link {
            display: inline-block;
            color: #3498db;
            text-decoration: none;
            margin-top: 25px;
            font-weight: 500;
            font-size: 1em;
            transition: color 0.3s;
        }

        .back-link:hover {
            color: #1a2a6c;
            text-decoration: underline;
        }

        /* √Årea do Exame (inicialmente oculta) */
        #exam-area {
            display: none;
        }

        .exam-info {
            background: #f8f9fa;
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e9ecef;
        }

        .timer {
            font-size: 1.2em;
            font-weight: 600;
            color: #e74c3c;
            background: white;
            padding: 8px 15px;
            border-radius: 12px;
            border: 1px solid #e9ecef;
            min-width: 80px;
            text-align: center;
        }

        .progress {
            font-size: 1em;
            color: #2c3e50;
            font-weight: 500;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 250px;
            min-height: 500px;
        }

        .question-section {
            padding: 25px;
            background: white;
        }

        .question-number {
            color: #3498db;
            font-size: 1em;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.1em;
            line-height: 1.5;
            color: #2c3e50;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            white-space: pre-line;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        .option {
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.95em;
            line-height: 1.4;
            display: flex;
            align-items: flex-start;
            background: white;
        }

        .option:hover {
            border-color: #3498db;
            background: #f8fafc;
        }

        .option.selected {
            border-color: #3498db;
            background: #ebf5fb;
        }

        .option.correct {
            border-color: #27ae60;
            background: #f0f9f4;
        }

        .option.incorrect {
            border-color: #e74c3c;
            background: #fef0f0;
        }

        .option.locked {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .option-label {
            display: inline-block;
            min-width: 25px;
            height: 25px;
            border-radius: 4px;
            background: #3498db;
            color: white;
            text-align: center;
            line-height: 25px;
            margin-right: 12px;
            font-weight: 600;
            font-size: 0.85em;
            flex-shrink: 0;
            margin-top: 1px;
        }

        .option-text {
            flex-grow: 1;
            white-space: pre-line;
        }

        .feedback-container {
            margin: 15px 0;
            padding: 12px;
            border-radius: 6px;
            text-align: center;
            font-weight: 600;
            font-size: 0.95em;
            display: none;
        }

        .feedback-correct {
            background: #f0f9f4;
            color: #27ae60;
            border: 1px solid #27ae60;
        }

        .feedback-incorrect {
            background: #fef0f0;
            color: #e74c3c;
            border: 1px solid #e74c3c;
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .btn-row {
            display: flex;
            gap: 8px;
        }

        .btn {
            padding: 10px 15px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-size: 0.85em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            flex: 1;
            background: white;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-primary {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .btn-success {
            background: #27ae60;
            color: white;
            border-color: #27ae60;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
            border-color: #95a5a6;
        }

        .btn-warning {
            background: #f39c12;
            color: white;
            border-color: #f39c12;
        }

        .btn-info {
            background: #17a2b8;
            color: white;
            border-color: #17a2b8;
        }

        .navigation-section {
            background: #f8f9fa;
            padding: 20px;
            border-left: 1px solid #e9ecef;
        }

        .question-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 6px;
            margin-bottom: 20px;
        }

        .grid-item {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
            font-size: 0.85em;
            min-height: 40px;
        }

        .grid-item:hover {
            border-color: #3498db;
            background: #f8fafc;
        }

        .grid-item.current {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .grid-item.answered {
            background: #27ae60;
            color: white;
            border-color: #27ae60;
        }

        .grid-item.marked {
            background: #f39c12;
            color: white;
            border-color: #f39c12;
        }

        /* Telas de Resultado */
        .results-screen {
            padding: 40px 30px;
            text-align: center;
            display: none;
        }

        .results-screen h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8em;
            font-weight: 500;
        }

        .score-display {
            font-size: 3em;
            font-weight: 600;
            margin: 20px 0;
            color: #3498db;
        }

        .score-text {
            font-size: 1.1em;
            margin-bottom: 30px;
            color: #7f8c8d;
            line-height: 1.5;
        }

        .results-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-purple {
            background: #9b59b6;
            color: white;
            border-color: #9b59b6;
        }

        .btn-teal {
            background: #1abc9c;
            color: white;
            border-color: #1abc9c;
        }

        .btn-orange {
            background: #e67e22;
            color: white;
            border-color: #e67e22;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }
            
            .navigation-section {
                border-left: none;
                border-top: 1px solid #e9ecef;
                order: 2;
            }
            
            .question-section {
                order: 1;
            }
            
            .question-grid {
                grid-template-columns: repeat(8, 1fr);
            }
            
            .btn-row {
                flex-wrap: wrap;
            }
            
            .btn {
                min-width: calc(50% - 4px);
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 20px 15px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .start-screen {
                padding: 30px 20px;
            }
            
            .start-screen h2 {
                font-size: 1.5em;
            }
            
            .question-grid {
                grid-template-columns: repeat(5, 1fr);
            }
            
            .btn {
                font-size: 0.8em;
                padding: 8px 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="academy-badge">PMG Academy</div>
            <h1>ITIL 4 Foundation</h1>
            <div class="subtitle">Simulado 1 - 40 Quest√µes</div>
        </div>

        <!-- Tela de In√≠cio (SEMPRE VIS√çVEL NO IN√çCIO) -->
        <div class="start-screen" id="start-screen">
            <h2>Simulado ITIL 4 Foundation</h2>
            <p>Teste seus conhecimentos com 40 quest√µes baseadas no exame oficial ITIL 4 Foundation. Prepare-se para a certifica√ß√£o de forma pr√°tica e eficiente.</p>
            
            <div class="warning">
                <strong>‚ö†Ô∏è ATEN√á√ÉO:</strong> Ap√≥s selecionar uma resposta, voc√™ n√£o poder√° alter√°-la!
            </div>
            
            <button class="start-btn" id="start-btn">
                üöÄ Iniciar Simulado
            </button>
            
            <div>
                <a href="#" class="back-link">‚Üê Voltar para Simulados</a>
            </div>
        </div>

        <!-- √Årea do Exame (INICIALMENTE OCULTA) -->
        <div id="exam-area">
            <div class="exam-info">
                <div class="timer" id="timer">60:00</div>
                <div class="progress">
                    Quest√£o <span id="current-question">1</span> de <span id="total-questions">40</span>
                </div>
            </div>

            <div class="content">
                <div class="question-section">
                    <div class="question-number" id="question-number">Quest√£o 1</div>
                    <div class="question-text" id="question-text"></div>
                    
                    <div class="options" id="options-container"></div>
                    
                    <div class="feedback-container" id="feedback"></div>

                    <div class="controls">
                        <div class="btn-row">
                            <button class="btn btn-secondary" id="prev-btn">
                                ‚¨ÖÔ∏è Anterior
                            </button>
                            <button class="btn btn-warning" id="mark-btn">
                                üìå Marcar
                            </button>
                            <button class="btn btn-info" id="explanation-btn">
                                üí° Explica√ß√£o
                            </button>
                            <button class="btn btn-primary" id="next-btn">
                                Pr√≥xima ‚û°Ô∏è
                            </button>
                        </div>
                        <div class="btn-row" id="finish-btn-row" style="display: none;">
                            <button class="btn btn-success" id="finish-btn" style="flex: 1;">
                                ‚úÖ Finalizar Simulado
                            </button>
                        </div>
                    </div>
                </div>

                <div class="navigation-section">
                    <div class="question-grid" id="question-grid"></div>
                    <button class="btn btn-secondary" id="reset-btn" style="margin-top: 10px; width: 100%;">
                        üîÑ Reiniciar Simulado
                    </button>
                </div>
            </div>
        </div>

        <!-- Tela de Resultados (INICIALMENTE OCULTA) -->
        <div class="results-screen" id="results-screen">
            <h2>Simulado Finalizado üéâ</h2>
            <div class="score-display" id="score-display">0/40</div>
            <div class="score-text" id="score-text"></div>
            <div class="results-controls">
                <button class="btn btn-purple" id="review-btn">
                    üìä Ver Relat√≥rio
                </button>
                <button class="btn btn-teal" id="restart-btn">
                    üîÑ Novo Simulado
                </button>
                <button class="btn btn-orange" id="full-report-btn">
                    üìã Relat√≥rio Completo
                </button>
            </div>
        </div>
    </div>

    <script>
        // Array com as quest√µes (apenas algumas para exemplo)
        const questions = [
            {
                number: 1,
                text: `Quais pr√°ticas est√£o, tipicamente, envolvidas na implementa√ß√£o da resolu√ß√£o de um problema?
1. Melhoria cont√≠nua  
2. Gerenciamento de requisi√ß√£o de servi√ßo  
3. Gerenciamento de n√≠vel de servi√ßo  
4. Habilita√ß√£o de mudan√ßa`,
                options: [
                    "1 e 2",
                    "2 e 3",
                    "3 e 4",
                    "1 e 4"
                ],
                correct: 3,
                explanation: `üéØ RESPOSTA CORRETA: 1 e 4

‚úÖ CORRETAS:
1. Melhoria cont√≠nua - Para identificar e eliminar causas raiz
4. Habilita√ß√£o de mudan√ßa - Para implementar solu√ß√µes permanentes

‚ùå INCORRETAS:
2. Gerenciamento de requisi√ß√£o de servi√ßo - Trata de solicita√ß√µes de usu√°rios, n√£o de resolu√ß√£o de problemas
3. Gerenciamento de n√≠vel de servi√ßo - Foca em acordos de n√≠vel de servi√ßo`
            },
            {
                number: 2,
                text: `Qual √© uma recomenda√ß√£o da pr√°tica "melhoria cont√≠nua"?`,
                options: [
                    "Pode existir uma equipe pequena dedicada a liderar os esfor√ßos de melhoria cont√≠nua",
                    "Todas as melhorias devem ser gerenciadas como projetos de v√°rias fases",
                    "Melhoria cont√≠nua deve estar isoladas de outras pr√°ticas",
                    "Fornecedores externos devem ser exclu√≠dos das iniciativas de melhoria"
                ],
                correct: 0,
                explanation: `üéØ RESPOSTA CORRETA: Pode existir uma equipe pequena dedicada a liderar os esfor√ßos de melhoria cont√≠nua

‚úÖ CORRETA: Embora todos devam participar, √© recomend√°vel ter uma equipe dedicada para liderar

‚ùå INCORRETAS:
- Todas as melhorias como projetos: Melhorias podem ser pequenas e n√£o requerer estrutura de projeto
- Isolada de outras pr√°ticas: Deve estar integrada com todas as pr√°ticas
- Excluir fornecedores: Fornecedores podem contribuir para melhorias`
            }
        ];

        // Vari√°veis de estado
        let currentQuestion = 0;
        let userAnswers = Array(questions.length).fill(null);
        let markedQuestions = Array(questions.length).fill(false);
        let timeLeft = 60 * 60;
        let timerInterval;
        let examFinished = false;

        // Elementos DOM
        const elements = {
            startScreen: document.getElementById('start-screen'),
            examArea: document.getElementById('exam-area'),
            resultsScreen: document.getElementById('results-screen'),
            questionNumber: document.getElementById('question-number'),
            questionText: document.getElementById('question-text'),
            optionsContainer: document.getElementById('options-container'),
            currentQuestion: document.getElementById('current-question'),
            totalQuestions: document.getElementById('total-questions'),
            timer: document.getElementById('timer'),
            questionGrid: document.getElementById('question-grid'),
            feedback: document.getElementById('feedback'),
            finishBtnRow: document.getElementById('finish-btn-row')
        };

        // Inicializa√ß√£o
        function init() {
            // Configurar event listeners
            document.getElementById('start-btn').addEventListener('click', startExam);
            document.getElementById('prev-btn').addEventListener('click', () => navigate(-1));
            document.getElementById('next-btn').addEventListener('click', () => navigate(1));
            document.getElementById('finish-btn').addEventListener('click', finishExam);
            document.getElementById('reset-btn').addEventListener('click', resetExam);
            document.getElementById('mark-btn').addEventListener('click', toggleMark);
            document.getElementById('explanation-btn').addEventListener('click', showExplanation);
            document.getElementById('review-btn').addEventListener('click', showReview);
            document.getElementById('restart-btn').addEventListener('click', resetExam);
            document.getElementById('full-report-btn').addEventListener('click', showFullReport);

            elements.totalQuestions.textContent = questions.length;
            createQuestionGrid();
            
            // Garantir que apenas a tela inicial esteja vis√≠vel
            elements.startScreen.style.display = 'block';
            elements.examArea.style.display = 'none';
            elements.resultsScreen.style.display = 'none';
        }

        function startExam() {
            elements.startScreen.style.display = 'none';
            elements.examArea.style.display = 'block';
            loadQuestion(0);
            startTimer();
        }

        function createQuestionGrid() {
            elements.questionGrid.innerHTML = '';
            questions.forEach((_, index) => {
                const item = document.createElement('div');
                item.className = 'grid-item';
                item.textContent = index + 1;
                item.addEventListener('click', () => loadQuestion(index));
                elements.questionGrid.appendChild(item);
            });
            updateNavigation();
        }

        function loadQuestion(index) {
            if (examFinished) return;
            
            currentQuestion = index;
            const question = questions[index];
            
            elements.questionNumber.textContent = `Quest√£o ${question.number}`;
            elements.questionText.textContent = question.text;
            elements.currentQuestion.textContent = question.number;
            
            // Limpar op√ß√µes anteriores
            elements.optionsContainer.innerHTML = '';
            
            // Criar novas op√ß√µes
            question.options.forEach((option, i) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                
                const label = document.createElement('div');
                label.className = 'option-label';
                label.textContent = String.fromCharCode(65 + i);
                
                const text = document.createElement('div');
                text.className = 'option-text';
                text.textContent = option;
                
                optionElement.appendChild(label);
                optionElement.appendChild(text);
                
                // Marcar resposta selecionada
                if (userAnswers[index] === i) {
                    optionElement.classList.add('selected');
                }
                
                // Adicionar evento de clique apenas se n√£o respondida
                if (userAnswers[index] === null) {
                    optionElement.addEventListener('click', () => selectOption(i));
                } else {
                    optionElement.classList.add('locked');
                }
                
                elements.optionsContainer.appendChild(optionElement);
            });
            
            updateNavigation();
            updateMarkButton();
            updateFinishButton();
        }

        function selectOption(optionIndex) {
            userAnswers[currentQuestion] = optionIndex;
            
            // Bloquear todas as op√ß√µes ap√≥s sele√ß√£o
            const options = elements.optionsContainer.querySelectorAll('.option');
            options.forEach(option => {
                option.classList.add('locked');
                option.style.pointerEvents = 'none';
            });
            
            updateNavigation();
        }

        function updateFinishButton() {
            if (currentQuestion === questions.length - 1) {
                elements.finishBtnRow.style.display = 'flex';
            } else {
                elements.finishBtnRow.style.display = 'none';
            }
        }

        function toggleMark() {
            markedQuestions[currentQuestion] = !markedQuestions[currentQuestion];
            updateNavigation();
            updateMarkButton();
        }

        function updateMarkButton() {
            const btn = document.getElementById('mark-btn');
            if (markedQuestions[currentQuestion]) {
                btn.innerHTML = '‚ùå Desmarcar';
                btn.classList.add('btn-warning');
            } else {
                btn.innerHTML = 'üìå Marcar';
                btn.classList.remove('btn-warning');
            }
        }

        function updateNavigation() {
            const items = elements.questionGrid.querySelectorAll('.grid-item');
            items.forEach((item, index) => {
                item.classList.remove('current', 'answered', 'marked');
                if (index === currentQuestion) item.classList.add('current');
                if (userAnswers[index] !== null) item.classList.add('answered');
                if (markedQuestions[index]) item.classList.add('marked');
            });
            
            document.getElementById('prev-btn').disabled = currentQuestion === 0;
            document.getElementById('next-btn').disabled = currentQuestion === questions.length - 1;
        }

        function navigate(direction) {
            const newIndex = currentQuestion + direction;
            if (newIndex >= 0 && newIndex < questions.length) {
                loadQuestion(newIndex);
            }
        }

        function showExplanation() {
            const question = questions[currentQuestion];
            const userAnswer = userAnswers[currentQuestion];
            
            if (userAnswer === null) {
                alert('‚ö†Ô∏è Selecione uma resposta antes de ver a explica√ß√£o.');
                return;
            }
            
            const isCorrect = userAnswer === question.correct;
            let explanationMessage = `üìù EXPLICA√á√ÉO DA QUEST√ÉO ${question.number}\n\n`;
            
            if (isCorrect) {
                explanationMessage += `üéâ Parab√©ns! Voc√™ acertou!\n\n`;
            } else {
                explanationMessage += `üí° Resposta correta: ${String.fromCharCode(65 + question.correct)}\n\n`;
            }
            
            explanationMessage += `${question.explanation}`;
            
            alert(explanationMessage);
        }

        function startTimer() {
            updateTimer();
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimer();
                if (timeLeft <= 0) finishExam();
            }, 1000);
        }

        function updateTimer() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            elements.timer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            if (timeLeft < 300) {
                elements.timer.style.color = '#e74c3c';
            }
        }

        function finishExam() {
            examFinished = true;
            clearInterval(timerInterval);
            
            const score = userAnswers.reduce((acc, answer, index) => 
                answer === questions[index].correct ? acc + 1 : acc, 0);
            const percentage = (score / questions.length) * 100;
            
            showResults(score, percentage);
        }

        function showResults(score, percentage) {
            elements.examArea.style.display = 'none';
            elements.resultsScreen.style.display = 'block';
            
            document.getElementById('score-display').textContent = `${score}/${questions.length}`;
            
            let message = '';
            if (percentage >= 85) {
                message = 'Excelente! Dom√≠nio completo dos conceitos ITIL! üéâ';
            } else if (percentage >= 70) {
                message = 'Bom trabalho! No caminho certo para certifica√ß√£o! üëç';
            } else if (percentage >= 65) {
                message = 'Pontua√ß√£o m√≠nima atingida. Recomendamos mais estudo. üìö';
            } else {
                message = 'Continue estudando! Reveja os conceitos ITIL. üí™';
            }
            
            document.getElementById('score-text').textContent = `${percentage.toFixed(1)}% de acertos. ${message}`;
        }

        function showReview() {
            alert('üìä Relat√≥rio de quest√µes respondidas');
        }

        function showFullReport() {
            alert('üìã Gerando relat√≥rio completo...');
        }

        function resetExam() {
            if (confirm('üîÑ Reiniciar simulado? Todo o progresso atual ser√° perdido.')) {
                // Resetar estado
                currentQuestion = 0;
                userAnswers = Array(questions.length).fill(null);
                markedQuestions = Array(questions.length).fill(false);
                timeLeft = 60 * 60;
                examFinished = false;
                
                // Resetar interface
                elements.resultsScreen.style.display = 'none';
                elements.examArea.style.display = 'none';
                elements.startScreen.style.display = 'block';
                
                // Resetar timer
                clearInterval(timerInterval);
                elements.timer.textContent = '60:00';
                elements.timer.style.color = '#e74c3c';
                
                // Recriar navega√ß√£o
                createQuestionGrid();
            }
        }

        // Inicializar quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
